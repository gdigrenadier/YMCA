Orca.Warship:
	Inherits: ^Airship
	Inherits: ^HeavyArmor
	Inherits: ^DummyTurret
	AutoTarget:
		AttackAnythingCondition: stance-attackanything
	AutoTargetPriority@DEFAULT:
		RequiresCondition: !stance-attackanything
		ValidTargets: Infantry, Vehicle, Water, Underwater, Defense, PrismTowerChargeable
		InvalidTargets: NoAutoTarget, WaterStructure
	AutoTargetPriority@ATTACKANYTHING:
		RequiresCondition: stance-attackanything
		ValidTargets: Infantry, Vehicle, Water, Underwater, Structure, Defense, Mine, PrismTowerChargeable
		InvalidTargets: NoAutoTarget
	AutoTargetPriority@DEFAULT:
		ValidTargets: PrismTowerChargeable
		InvalidTargets: NoAutoTarget, WaterStructure
	AutoTargetPriority@ATTACKANYTHING:
		ValidTargets: PrismTowerChargeable
		InvalidTargets: NoAutoTarget
	AutoTargetPriority@PRISMNORMAL:
		RequiresCondition: !assault-move && !attack-move
		ValidTargets: PrismTowerChargeable
	Buildable:
		Queue: Aircraft
		BuildAtProductionType: Helicopter
		BuildPaletteOrder: 40
		Prerequisites: ~hpad.td, ~aircraft.eagle, gtek
		IconPalette: chrometd
		Description: A heavy orca warship with ion drones delivering ion strikes \nand missile based anti-air capabilites.\n
	Voiced:
		VoiceSet: OrcaVoice
	Valued:
		Cost: 5000
	Tooltip:
		Name: Orca Ion Warship
	Health:
		HP: 60000
	RevealsShroud:
		Range: 10c0
		MinRange: 8c0
		Type: GroundPosition
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 8c0
		Type: GroundPosition
	Turreted@PRIMARY:
		Turret: primary
		TurnSpeed: 1000
	Turreted@SECONDARY:
		Turret: secondary
		TurnSpeed: 1000
	Armament@PRIMARY:
		Weapon: InvaderLauncher
		Name: primary
		Turret: primary
		LocalOffset: 0,0,0
	Armament@secondary:
		Weapon: IonStrike.Orca.Charge
		LocalOffset: 0,0,986
		Name: secondary
		Turret: secondary
		TargetRelationships: Ally
		ForceTargetRelationships: Ally
	Aircraft:
		CruiseAltitude: 2c256
		InitialFacing: 192
		TurnSpeed: 12
		Speed: 49
		AltitudeVelocity: 0c50
		CanForceLand: False
	Selectable:
	Explodes:
		Weapon: KirovExplode
		RequiresCondition: !airborne
	SpawnActorOnDeath:
		Actor: Orca.Warship.Husk
		RequiresCondition: !empdisable
	SpawnActorOnDeath@EMP:
		Actor: Orca.Warship.Husk.EMP
		RequiresCondition: empdisable
	CarrierMaster@carr1:
		Actors: Orca.Drone
		RearmTicks: 0
		RespawnTicks: 200
		InstaRepair: true
		SlaveDisposalOnKill: KillSlaves
		SpawnAllAtOnce: false
		LoadedCondition: inva-loaded
		RequiresCondition: !empdisable && !being-warped
	Exit@0:
		SpawnOffset: -100,0,0
		Facing: 60
	Exit@1:
		SpawnOffset: -100,0,0
		Facing: -60
	Exit@2:
		SpawnOffset: 100,0,0
		Facing: 60
	Exit@3:
		SpawnOffset: 100,0,0
		Facing: -60
	-EjectOnDeath:
	ChangesHealth@REGEN:
		PercentageStep: 1
		Delay: 25
		StartIfBelow: 75
		DamageCooldown: 150

Orca.Drone:
	Inherits: ^Helicopter
	Valued:
		Cost: 50
	Tooltip:
		Name: Ion Drone
	Health:
		HP: 10000
	Armament@PRIMARY:
		Weapon: IonStrike.Orca.Dummy
		Name: primary
	Armament@SECONDARY:
		Name: secondary
		Weapon: IonStrike.Orca
		FireDelay: 3
		RequiresCondition: ammo
	ExternalCondition@aiming:
		Condition: aiming
	GrantConditionWhileAiming:
		Condition: aiming
	GrantConditionOnAttack@primary:
		ArmamentNames: primary
		Condition: aiming
		MaximumInstances: 1
		RevokeDelay: 40
	WithColoredOverlay@HIGH:
		RequiresCondition: aiming
		Color: ffffff80
	ReloadAmmoPoolCA@autocharge:
		Delay: 1
		Count: 1
		ResetOnFire: False
		RequiresCondition: ammo < 1 && powercharged
		ShowSelectionBar: false
		SelectionBarColor: 0000ff
	AttackAircraft:
		FacingTolerance: 80
		PersistentTargeting: false
		OpportunityFire: false
		PauseOnCondition: empdisable || being-warped
	Targetable@PrismTowerChargeable:
		TargetTypes: PrismTowerChargeable
		RequiresCondition: !powercharged && aiming
	ExternalCondition@POWERCHARGED:
		Condition: powercharged
	Aircraft:
		CruiseAltitude: 2c0
		AltitudeVelocity: 1c512
		TurnSpeed: 20
		TakeoffSounds: orcaup1.aud
		LandingSounds: orcadwn1.aud
		Speed: 181
	AmmoPool:
		Ammo: 1
		InitialAmmo: 0
		Armaments: secondary
		AmmoCondition: ammo
		ReloadDelay: 0
	WithAmmoPipsDecoration:
	RejectsOrders:
	SpawnActorOnDeath:
		Actor: Orca.Drone
		RequiresCondition: ammo && !empdisable
	SpawnActorOnDeath@Empty:
		Actor: Orca.Drone.empty
		RequiresCondition: !ammo && !empdisable
	SpawnActorOnDeath@EMP:
		Actor: Orca.Drone.EMP
		RequiresCondition: ammo && empdisable
	SpawnActorOnDeath@EmptyEMP:
		Actor: Orca.Drone.empty.EMP
		RequiresCondition: !ammo && empdisable
	-EjectOnDeath:
	-Selectable:
	Interactable:
	-ActorLostNotification:
	LeavesTrails:
		Offsets: -253,0,171
		MovingInterval: 2
		Image: smokey
		StationaryInterval: 2
		SpawnAtLastPosition: False
		TrailWhileStationary: True
		Type: CenterPosition
		RequiresCondition: enable-smoke
	CarrierSlave:
		LandingDistance: 8c0
	GrantConditionOnDamageState@SmokeTrail:
		Condition: enable-smoke
