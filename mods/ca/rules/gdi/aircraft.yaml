
ORCA:
	Inherits: ^Helicopter
	Inherits: ^TDAircraftSprite
	Inherits: ^BiologicalPilot
	Inherits: ^PrioAntiHeavyAA
	Inherits: ^GainsExperience
	Valued:
		Cost: 1200
	Tooltip:
		Name: Orca
		RequiresCondition: !orcav2
	Tooltip@Eagle:
		Name: Orca V2
		RequiresCondition: orcav2
	RenderSprites:
		Image: orca
		FactionImages:
			eagle: orca.v2
	GrantConditionOnFaction@OrcaV2:
		Condition: orcav2
		Factions: eagle
	Buildable:
		Queue: Aircraft
		BuildAtProductionType: Helicopter
		BuildPaletteOrder: 20
		Prerequisites: ~hpad.td, ~aircraft.gdi, ~!commander_tree.orca.ap, ~!commander_tree.orca.he, ~!commander_tree.orca.payload
		IconPalette: chrometd
		Description: VTOL gunship armed\nwith multi-purpose missiles.\n  Strong vs Vehicles, Aircraft\n  Weak vs Infantry
	Aircraft:
		AltitudeVelocity: 0c100
		TurnSpeed: 20
		TakeoffSounds: orcaup1.aud
		LandingSounds: orcadwn1.aud
		Speed: 181
	Health:
		HP: 22000
	RevealsShroud:
		Range: 12c0
		MinRange: 10c0
		Type: GroundPosition
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 10c0
		Type: GroundPosition
	Armament@PRIMARY:
		Weapon: HellfireAG.Orca
		LocalOffset: 0,-213,-85, 0,213,-85
		PauseOnCondition: !ammo
	Armament@SECONDARY:
		Weapon: HellfireAA.Orca
		LocalOffset: 0,213,-85, 0,-213,-85
		PauseOnCondition: !ammo
	AttackAircraft:
		FacingTolerance: 80
		AttackType: Hover
		PersistentTargeting: false
		OpportunityFire: false
		PauseOnCondition: empdisable || being-warped
	AmmoPool:
		Ammo: 12
		ReloadCount: 2
		AmmoCondition: ammo
	WithAmmoPipsDecoration:
		PipCount: 4
		Position: BottomLeft
		Margin: 4, 3
		RequiresSelection: true
	SpawnActorOnDeath:
		Actor: ORCA.Husk
		RequiresCondition: ammo && !empdisable && !being-warped
	SpawnActorOnDeath@Empty:
		Actor: ORCA.Husk.empty
		RequiresCondition: !ammo && !empdisable && !being-warped
	SpawnActorOnDeath@EMP:
		Actor: ORCA.Husk.EMP
		RequiresCondition: ammo && empdisable && !being-warped
	SpawnActorOnDeath@EmptyEMP:
		Actor: ORCA.Husk.empty.EMP
		RequiresCondition: !ammo && empdisable && !being-warped
	AutoTarget:
		InitialStance: Defend
		InitialStanceAI: Defend
	LeavesTrails:
		Offsets: -427,0,0
		MovingInterval: 2
		Image: smokey
		StationaryInterval: 2
		SpawnAtLastPosition: False
		TrailWhileStationary: True
		Type: CenterPosition
		RequiresCondition: enable-smoke
	WithMoveAnimation:
		MoveSequence: move
	Rearmable:
		RearmActors: hpad, hpad.td
	GrantConditionOnDamageState@SmokeTrail:
		Condition: enable-smoke
	DamageMultiplier@eagle:
		RequiresCondition: aircraft.eagle
		Modifier: 90
	FirepowerMultiplier@eagle:
		RequiresCondition: aircraft.eagle
		Modifier: 120

ORCA.AP:
	Inherits: ORCA
	Tooltip:
		Name: Orca (AP)
		RequiresCondition: !aircraft.eagle
	Tooltip@Eagle:
		Name: Orca V2 (AP)
		RequiresCondition: aircraft.eagle
	Buildable:
		Prerequisites: ~hpad.td, ~aircraft.gdi, ~commander_tree.orca.ap
		Description: VTOL gunship armed\nwith armor-piercing missiles.\n  Strong vs Tanks\n  Weak vs Infantry
	WithProductionIconOverlay@Shell:
		Types: Shell
	Armament@PRIMARY:
		Weapon: HellfireAG.Orca.AP
		LocalOffset: 0,-213,-85, 0,213,-85
		PauseOnCondition: !ammo
	Armament@SECONDARY:
		Weapon: HellfireAA.Orca.AP
		LocalOffset: 0,213,-85, 0,-213,-85
		PauseOnCondition: !ammo

ORCA.HE:
	Inherits: ORCA
	Inherits: ^PrioAntiLightAA
	Tooltip:
		Name: Orca (HE)
		RequiresCondition: !aircraft.eagle
	Tooltip@Eagle:
		Name: Orca V2 (Payload)
		RequiresCondition: aircraft.eagle
	Buildable:
		Prerequisites: ~hpad.td, ~aircraft.gdi, ~commander_tree.orca.he
		Description: VTOL gunship armed\nwith high-explosive missiles.\n  Strong vs Light Vehicles, Infantry, Aircraft\n  Weak vs Tanks, Defense Buildings
	WithProductionIconOverlay@Grenade:
		Types: Grenade
	Armament@PRIMARY:
		Weapon: HellfireAG.Orca.HE
		LocalOffset: 0,-213,-85, 0,213,-85
		PauseOnCondition: !ammo
	Armament@SECONDARY:
		Weapon: HellfireAA.Orca.HE
		LocalOffset: 0,213,-85, 0,-213,-85
		PauseOnCondition: !ammo

ORCA.Payload:
	Inherits: ORCA
	Valued:
		Cost: 1300
	Tooltip:
		Name: Orca (Payload)
		RequiresCondition: !aircraft.eagle
	Tooltip@Eagle:
		Name: Orca V2 (Payload)
		RequiresCondition: aircraft.eagle
	Buildable:
		Prerequisites: ~hpad.td, ~aircraft.gdi, ~commander_tree.orca.payload
	WithProductionIconOverlay@Bullets:
		Types: Bullets
	AmmoPool:
		Ammo: 20
		ReloadCount: 2
		AmmoCondition: ammo
	WithAmmoPipsDecoration:
		PipCount: 5
		Position: BottomLeft
		Margin: 4, 3
		RequiresSelection: true

ORCA.Torp:
	Inherits: ORCA
	Tooltip:
		Name: Orca (Torpedo)
		RequiresCondition: !aircraft.eagle
	Tooltip@Eagle:
		Name: Orca V2 (Torpedo)
		RequiresCondition: aircraft.eagle
	Buildable:
		Prerequisites: ~hpad.td, ~aircraft.gdi, ~commander_tree.orca.torp
		Description: VTOL gunship armed\nwith torpedo bombs.
	WithProductionIconOverlay@Torpedo:
		Types: Torpedo
	TooltipExtras:
		Strengths: • Strong vs Ships, Submarines
		Weaknesses: • Weak vs Anti-Air
		Attributes: • Detects submerged vessels
	Armament@PRIMARY:
		Weapon: TorpBomb
		LocalOffset: 0,-213,-85, 0,213,-85
		PauseOnCondition: !ammo
	-Armament@SECONDARY:
	AmmoPool:
		Ammo: 8
	DetectCloaked:
		DetectionTypes: Underwater
		Range: 8c0
	WithAmmoPipsDecoration:
		Position: BottomLeft
		RequiresSelection: true


Orca_Bomber:
	Inherits: ^Helicopter
	Inherits: ^TDAircraftSprite
	Inherits: ^BiologicalPilot
	Inherits: ^PrioAntiHeavy
	RenderSprites:
		Image: orcab
	Buildable:
		Queue: Aircraft
		BuildAtProductionType: Helicopter
		BuildPaletteOrder: 40
		Prerequisites: ~hpad.td, ~aircraft.eagle, techcenter, ~!disabled
		IconPalette: chrome
		Description: VTOL bomber armed with EMP bombs.\n  Strong vs Buildings, Vehicles\n  Weak vs Aircraft, Infantry
	Valued:
		Cost: 1600
	Tooltip:
		Name: Orca Bomber (should not be visible to you)
	Health:
		HP: 36000
	Armament:
		Weapon: OrcaBomb.EMP
		LocalOffset: 2,-256,-43, 2,256,-43
		PauseOnCondition: !ammo
	AttackAircraft:
		FacingTolerance: 80
		Voice: Attack
		PersistentTargeting: false
		OpportunityFire: false
		PauseOnCondition: empdisable || being-warped
	Aircraft:
		CruiseAltitude: 2560
		AltitudeVelocity: 0c120
		TurnSpeed: 16
		Speed: 180
		RepulsionSpeed: 40
		MaximumPitch: 56
		TakeoffSounds: orcaup1.aud
		LandingSounds: orcadwn1.aud
		CanHover: False
		CanSlide: False
		Voice: Move
	AutoTarget:
		InitialStance: HoldFire
		InitialStanceAI: HoldFire
	AmmoPool:
		Ammo: 8
		AmmoCondition: ammo
	WithAmmoPipsDecoration:
		PipCount: 4
		Position: BottomLeft
		Margin: 4, 3
		RequiresSelection: true
	SpawnActorOnDeath:
		Actor: orca_bomber.husk
		RequiresCondition: ammo && !empdisable && !being-warped
	SpawnActorOnDeath@Empty:
		Actor: orca_bomber.Husk.empty
		RequiresCondition: !ammo && !empdisable && !being-warped
	SpawnActorOnDeath@EMP:
		Actor: orca_bomber.Husk.EMP
		RequiresCondition: ammo && empdisable && !being-warped
	SpawnActorOnDeath@EmptyEMP:
		Actor: orca_bomber.Husk.empty.EMP
		RequiresCondition: !ammo && empdisable && !being-warped
	LeavesTrails:
		Offsets: -853,0,171
		MovingInterval: 2
		Image: smokey
		StationaryInterval: 2
		SpawnAtLastPosition: False
		TrailWhileStationary: True
		Type: CenterPosition
		RequiresCondition: enable-smoke
	WithMoveAnimation:
		MoveSequence: move
	Rearmable:
		RearmActors: hpad.td, hpad
	Voiced:
		VoiceSet: OrcaVoice
	GrantConditionOnDamageState@SmokeTrail:
		Condition: enable-smoke

orca_bomber.EMP:
	Inherits: Orca_Bomber
	Valued:
		Cost: 1600
	Tooltip:
		Name: Orca Bomber (EMP)
	WithProductionIconOverlay@EMP:
		Types: EMP
	Buildable:
		Prerequisites: ~hpad.td, ~aircraft.eagle, techcenter, ~commander_tree.orca_bomber.emp
		Description: VTOL bomber armed with EMP bombs.\n  Strong vs Buildings, Vehicles\n  Weak vs Aircraft, Infantry
	Armament:
		Weapon: OrcaBomb.EMP
		LocalOffset: 2,-256,-43, 2,256,-43
		PauseOnCondition: !ammo

orca_bomber.HE:
	Inherits: Orca_Bomber
	Valued:
		Cost: 1600
	Tooltip:
		Name: Orca Bomber (HE)
	WithProductionIconOverlay@Dynamite:
		Types: Dynamite
	Buildable:
		Prerequisites: ~hpad.td, ~aircraft.eagle, techcenter, ~commander_tree.orca_bomber.he
		Description: VTOL bomber armed with high explosion cluster bombs.\n  Strong vs Buildings, Light Vehicles\n  Weak vs Aircraft
	Armament:
		Weapon: Orcabomb.HE
	AmmoPool:
		Ammo: 4

orca_bomber.AP:
	Inherits: Orca_Bomber
	Valued:
		Cost: 1600
	Tooltip:
		Name: Orca Bomber (AP)
	WithProductionIconOverlay@Shell:
		Types: Shell
	Buildable:
		Prerequisites: ~hpad.td, ~aircraft.eagle, techcenter, ~commander_tree.orca_bomber.ap
		Description: VTOL bomber armed with AP bombs.\n  Strong vs Heavy Vehicles\n  Weak vs Aircraft, Infantry
	Armament:
		Weapon: APBomb
	AmmoPool:
		Ammo: 4


Orca.Warship:
	Inherits: ^Airship
	Inherits: ^HeavyArmor
	Inherits: ^DummyTurret
	Inherits: ^PrioAntiLightAA
	Buildable:
		Queue: Aircraft
		BuildAtProductionType: Helicopter
		BuildPaletteOrder: 40
		Prerequisites: ~hpad.td, ~commander_tree.ion_warship, miss.gdi
		IconPalette: chrometd
		Description: A heavy orca warship with ion drones delivering ion strikes vs. ground \nand heavy missiles vs. air.\n
	Voiced:
		VoiceSet: OrcaVoice
	Valued:
		Cost: 8000
	Tooltip:
		Name: Orca Ion Warship
	Health:
		HP: 120000
	RevealsShroud:
		Range: 10c0
		MinRange: 8c0
		Type: GroundPosition
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 8c0
		Type: GroundPosition
	Turreted@PRIMARY:
		Turret: primary
		TurnSpeed: 1000
	Turreted@SECONDARY:
		Turret: secondary
		TurnSpeed: 1000
	Armament@PRIMARY:
		Weapon: OrcaLauncher
		Name: primary
		Turret: primary
		LocalOffset: 0,0,0
	Armament@AAMISSILES:
		Name: secondary
		Turret: secondary
		Weapon: RedEye.MKII
		LocalOffset: -420,-300,600, -320,300,600
		LocalYaw: -100,100
		MuzzleSequence: muzzle1
	Aircraft:
		CruiseAltitude: 2c256
		InitialFacing: 192
		TurnSpeed: 12
		Speed: 49
		AltitudeVelocity: 0c50
		CanForceLand: False
	Selectable:
	Explodes:
		Weapon: KirovExplode
		RequiresCondition: !airborne
	SpawnActorOnDeath:
		Actor: Orca.Warship.Husk
		RequiresCondition: !empdisable
	SpawnActorOnDeath@EMP:
		Actor: Orca.Warship.Husk.EMP
		RequiresCondition: empdisable
	CarrierMaster@carr1:
		Actors: Orca.Drone
		RearmTicks: 0
		RespawnTicks: 120
		InstaRepair: true
		SlaveDisposalOnKill: KillSlaves
		SpawnAllAtOnce: false
		LoadedCondition: inva-loaded
		RequiresCondition: !empdisable && !being-warped
	Exit@0:
		SpawnOffset: -100,0,0
		Facing: 60
	Exit@1:
		SpawnOffset: -100,0,0
		Facing: -60
	Exit@2:
		SpawnOffset: 100,0,0
		Facing: 60
	Exit@3:
		SpawnOffset: 100,0,0
		Facing: -60
	-EjectOnDeath:
	ChangesHealth@REGEN:
		PercentageStep: 1
		Delay: 25
		StartIfBelow: 75
		DamageCooldown: 150
	ExternalCondition@powercharged:
		Condition: powercharged
	Targetable@PrismTowerChargeable:
		TargetTypes: PrismTowerChargeable
		RequiresCondition: !powercharged

Orca.Drone:
	Inherits: ^Helicopter
	Valued:
		Cost: 50
	Tooltip:
		Name: Ion Drone
	Health:
		HP: 25000
	Armament:
		Weapon: IonStrike.Orca.init
		PauseOnCondition: !ammo
	AttackAircraft:
		FacingTolerance: 512
		PersistentTargeting: false
		OpportunityFire: false
		PauseOnCondition: empdisable || being-warped
	Aircraft:
		CruiseAltitude: 2c0
		AltitudeVelocity: 1c512
		TurnSpeed: 20
		TakeoffSounds: orcaup1.aud
		LandingSounds: orcadwn1.aud
		Speed: 221
	Rearmable:
		RearmActors: Orca.Warship
	AmmoPool:
		Ammo: 1
		InitialAmmo: 1
		AmmoCondition: ammo
		ReloadDelay: 0
	RejectsOrders:
	-SpawnActorOnDeath:
	-EjectOnDeath:
	-Selectable:
	Interactable:
	-ActorLostNotification:
	CarrierSlave:
		LandingDistance: 8c0

dummy.ionstrike:
	Inherits: ^DummyTurret
	AutoTarget:
		InitialStance: AttackAnything
	AutoTargetPriority:
		ValidTargets: PrismTowerChargeable
		Priority: 10
	Armament:
		Weapon: IonStrike.Orca.Charge
		LocalOffset: 0,0,2500
		TargetRelationships: Ally
		ForceTargetRelationships: Ally
	GrantConditionOnAttack:
		Condition: powercharged
		MaximumInstances: 1
		RevokeDelay: 3
	Immobile:
		OccupiesSpace: false
	Interactable:
	EditorOnlyTooltip:
		Name: (ion strike try impact)
	BodyOrientation:
		QuantizedFacings: 1
	PeriodicExplosion:
		Weapon: IonStrike.Orca
		RequiresCondition: powercharged
		InitialDelay: 1
	KillsSelf:
		Delay: 10
